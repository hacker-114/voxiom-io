try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="66f8cac4-72b2-4e22-aac3-2a842165c5a2",e._sentryDebugIdIdentifier="sentry-dbid-66f8cac4-72b2-4e22-aac3-2a842165c5a2")}catch(e){}{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=Object.assign({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:crazygames-portal":!0})}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[34282],{46849:(e,t,i)=>{i.d(t,{g:()=>N,A:()=>Z});var s,n,r=i(74848),a=i(96540),d=i(70302),o=i(88506),h=i(77889),l=i(12896);let u=null;var c=i(59386),m=i(66961),g=i(38037),f=i(39115),p=i(40499),b=i(75493),v=i(42293);let w=[{width:1910,height:970},{width:1360,height:660},{width:1370,height:650},{width:1370,height:620},{width:1530,height:750},{width:1360,height:650},{width:1910,height:940},{width:1370,height:660},{width:1360,height:630},{width:1080,height:710},{width:1920,height:970},{width:1360,height:620},{width:1910,height:960},{width:1370,height:670},{width:1530,height:710},{width:1910,height:930},{width:1370,height:630},{width:1920,height:940},{width:390,height:660}];var y=i(35265),E=i(8379),A=i(95613),C=i(75782);class B{constructor(e){this.id=e,this.previousTimeInView=0,this.isInView=!1,this.isInFocus=!0,this.isHidden=!1,this.inViewSince=Date.now(),this.inDOMSince=this.inViewSince}setHidden(e){this.isHidden=e}canRefresh(e,t){return this.isInView&&this.isInFocus&&this.totalTimeInView()>=e&&this.totalTimeInDOM()>=t}refreshed(){this.previousTimeInView=0,this.inViewSince=Date.now(),this.inDOMSince=this.inViewSince}cameIntoView(){this.isInView=!0,this.inViewSince=Date.now()}removedFromView(){this.isInView=!1,this.updateTimeInView()}pageLostFocus(){this.isInFocus=!1,this.isInView&&this.updateTimeInView()}pageRegainedFocus(){this.isInFocus=!0,this.isInView&&(this.inViewSince=Date.now())}updateTimeInView(){let e=Date.now()-this.inViewSince;this.previousTimeInView+=e,this.inViewSince=Date.now()}totalTimeInDOM(){return Date.now()-this.inDOMSince}totalTimeInView(){return this.isInView?this.previousTimeInView+Date.now()-this.inViewSince:this.previousTimeInView}}class R{constructor(e,t){this.viewportThreshold=e,this.minimumTimeInViewInMs=t,this.handleVisibilityChange=()=>{let e=void 0!==this.hiddenKey&&this.isHidden(document,this.hiddenKey),t=C.A.isFullscreen()||C.A.isFakeFullscreen();e||t?this.pageLostFocus():this.pageRegainedFocus()},this.handleFullscreenChange=()=>{C.A.isFullscreen()||C.A.isFakeFullscreen()?this.pageLostFocus():this.pageRegainedFocus()},this.adUnits=[],this.hiddenKey=this.calculateHiddenKey(document),this.observer=this.createObserver(),this.installEventListeners(),this.pageFocusChangeCallBacks=[],this.ioCallbackPending=[],this.ioCallbackPendingPromise=null,this.ioCallbackPendingResolve=null}calculateHiddenKey(e){return void 0!==e.hidden?"hidden":this.hasMsHiddenKey(e)?"msHidden":this.hasWebkitHiddenKey(e)?"webkitHidden":void 0}getVisibilityChangeKey(e){switch(e){case"hidden":return"visibilitychange";case"msHidden":return"msvisibilitychange";case"webkitHidden":return"webkitvisibilitychange"}}addElement(e){if(this.adUnits.find(t=>t.id===e))return;let t=this.getElementById(e);if(!t)return;this.ioCallbackPending.push(e),this.adUnits.push(new B(e));let i=t.parentElement;i&&this.observer.observe(i)}removeElement(e,t){this.adUnits=this.adUnits.filter(t=>t.id!==e),t&&t.parentElement&&this.observer.unobserve(t.parentElement),this.removeWaitingForCallbackElement(e)}addPageFocusChangeCallback(e){this.pageFocusChangeCallBacks.push(e)}stop(){this.adUnits=[],this.pageFocusChangeCallBacks=[],this.observer.disconnect(),this.removeEventListeners()}waitForObservedUnitsCallbacks(){return this.ioCallbackPendingPromise||(this.ioCallbackPendingPromise=new Promise(e=>{this.ioCallbackPendingResolve=e,0===this.ioCallbackPending.length&&e()})),this.ioCallbackPendingPromise}isUnitHidden(e){let t=this.adUnits.find(t=>t.id===e);return!t||t.isHidden}canUnitRefresh(e,t){let i=this.adUnits.find(t=>t.id===e);return!i||i.canRefresh(this.minimumTimeInViewInMs,t)}refreshedUnits(e){e.map(e=>this.getObservedUnit(e)).map(e=>e.refreshed())}intersectionCallback(e){e.forEach(e=>{let t=e.target.firstElementChild;if(t){let i=t.id,s=this.getObservedUnit(i);e.intersectionRatio>=this.viewportThreshold?s.cameIntoView():s.removedFromView(),s.setHidden(this.isEntryHidden(e)),this.removeWaitingForCallbackElement(i)}})}isEntryHidden(e){let{boundingClientRect:t}=e;return this.isBoundingRectHidden(t)}isBoundingRectHidden(e){return 0===e.height&&0===e.width}getElementById(e){return document.getElementById(e)||(console.error(`[AdObserver] could not find element with id ${e}`),null)}getObservedUnit(e){let t=this.adUnits.find(t=>t.id===e);if(!t)throw Error(`[AdObserver] observed unit ${e} not found`);return t}pageLostFocus(){this.adUnits.map(e=>e.pageLostFocus()),this.invokeCallBacks(!1)}pageRegainedFocus(){this.adUnits.map(e=>e.pageRegainedFocus()),this.invokeCallBacks(!0)}invokeCallBacks(e){this.pageFocusChangeCallBacks.forEach(t=>t(e))}createObserver(){return new IntersectionObserver((e,t)=>{this.intersectionCallback(e)},{threshold:[this.viewportThreshold]})}installEventListeners(){void 0!==this.hiddenKey&&document.addEventListener(this.getVisibilityChangeKey(this.hiddenKey),this.handleVisibilityChange),this.installFullscreenListener()}removeEventListeners(){void 0!==this.hiddenKey&&document.removeEventListener(this.getVisibilityChangeKey(this.hiddenKey),this.handleVisibilityChange),this.removeFullscreenListeners()}installFullscreenListener(){C.A.addFullscreenListener(this.handleFullscreenChange),C.A.addFakeFullscreenListener(this.handleFullscreenChange)}removeFullscreenListeners(){C.A.removeFullscreenListener(this.handleFullscreenChange),C.A.removeFakeFullscreenListener(this.handleFullscreenChange)}removeWaitingForCallbackElement(e){this.ioCallbackPending=this.ioCallbackPending.filter(t=>t!==e),0===this.ioCallbackPending.length&&this.ioCallbackPendingResolve&&(this.ioCallbackPendingResolve(),this.ioCallbackPendingResolve=null)}isHidden(e,t){switch(t){case"hidden":return e.hidden;case"msHidden":return!!this.hasMsHiddenKey(e)&&e.msHidden;case"webkitHidden":return!!this.hasWebkitHiddenKey(e)&&e.webkitHidden}}hasMsHiddenKey(e){return"boolean"==typeof e.msHidden}hasWebkitHiddenKey(e){return"boolean"==typeof e.webkitHidden}}var L=i(65363),I=i(341),D=i(68044);let T=function(e,t){let i=window.setTimeout(e,t);return()=>clearTimeout(i)};class S{constructor(e,t,i=T){this.timerFactory=i,this.timerPeriod=e,this.onEvent=t,this.timeRemaining=0}restart(){this.disposed||(this.clearCurrent(),this.startTimer(this.timerPeriod))}startTimer(e){this.timerDisposer=this.timerFactory(()=>{this.timerDisposer=void 0,this.onEvent()},e),this.timeStarted=this.now(),this.currentTimeout=e}pause(){if(this.disposed||!this.isRunning())return;this.clearCurrent();let e=this.now()-this.timeStarted;this.timeRemaining=this.currentTimeout-e}resume(e){if(this.disposed||this.isRunning())return;let t=void 0!==e?e:this.timeRemaining;t<=0?(this.timeRemaining=this.currentTimeout,this.onEvent(),this.isRunning()||this.restart()):this.startTimer(t)}dispose(){this.disposed=!0,this.clearCurrent()}clearCurrent(){void 0!==this.timerDisposer&&(this.timerDisposer(),this.timerDisposer=void 0)}isRunning(){return void 0!==this.timerDisposer}now(){return Date.now()}}class k{constructor(e,t,i){this.timeOfLastRefresh=0,this.timeOfMount=0,this.eventHandlerMemory={gamePlayStarted:!1},this.handleMessageEvent=e=>{if(!e.data||e.data.type!==I.x)return;let t=this.convertToRefreshTimerEvent(e.data);this.handleEvent(t)},this.handleEvent=e=>{let t=function(e,t,i,s,n,r,a,d){if("timerTriggered"===e)return s+(()=>{switch(a.type){case"regular":return a.timeBetweenRefreshes;case"smart":return a.minimumTimeBetweenRefreshes}})()<=1.1*n?{type:"refresh"}:{type:"ignore"};if(!t){switch(r.type){case"startOnMount":return"componentMounted"===e?{type:"restartTimer"}:{type:"ignore"};case"waitUntilAfterGameLoading":if("gameFinishedLoading"===e||"gameLoadingStateResponseSuccess"===e){let e=n-i,t=r.minimumWaitTimeAfterPageLoad;if(e>=t)return{type:"refresh"};return{type:"resumeTimer",customTimeout:Math.max(0,t-e)}}}return{type:"ignore"}}if("smart"===a.type)switch(e){case"gameplayStart":if(d.gamePlayStarted)break;return d.gamePlayStarted=!0,{type:"restartTimer"};case"adFinished":case"adError":case"rewardedAd":case"midgameAd":case"gameplayStop":if(!d.gamePlayStarted)break;if(d.gamePlayStarted=!1,n-s>=a.minimumTimeBetweenRefreshes)return{type:"refresh"}}return{type:"ignore"}}(e,this.timer.isRunning(),this.timeOfMount,this.timeOfLastRefresh,Date.now(),this.startMomentConfig,this.refreshConfig,this.eventHandlerMemory);this.onAction(t)},this.refreshAds=e,this.timer=new S(function(e){switch(e.type){case"smart":return e.maximumTimeBetweenRefreshes;case"regular":return e.timeBetweenRefreshes}}(i),()=>this.handleEvent("timerTriggered")),this.startMomentConfig=t,this.refreshConfig=i}refresh(){this.refreshAds()?(this.timeOfLastRefresh=Date.now(),this.timer.restart()):this.timer.resume()}handleExternalEvent(e){switch(e.type){case"focusChanged":return e.hasFocus?this.onAction({type:"resumeTimer"}):this.onAction({type:"pauseTimer"}),!0;case"initialAdsRequestFinished":return"startOnMount"===this.startMomentConfig.type&&this.onAction({type:"restartTimer"}),!0;case"mounted":return this.init(),this.handleEvent("componentMounted"),!0;case"willUnmount":return this.dispose(),!0}}getMinimumTimeInDOMBeforeRefresh(){return this.refreshConfig.minimumTimeInDOM}init(){this.requiresGameEventListener()&&(window.addEventListener("message",this.handleMessageEvent),"waitUntilAfterGameLoading"===this.startMomentConfig.type&&D.y()?.contentWindow?.postMessage("check-loading-state","*")),this.timeOfMount=Date.now()}dispose(){this.timer.dispose(),this.requiresGameEventListener()&&window.removeEventListener("message",this.handleMessageEvent)}requiresGameEventListener(){return"smart"===this.refreshConfig.type||"waitUntilAfterGameLoading"===this.startMomentConfig.type}onAction(e){switch(e.type){case"restartTimer":return this.timer.restart(),!0;case"pauseTimer":return this.timer.pause(),!0;case"resumeTimer":return this.timer.resume(),!0;case"refresh":return this.refresh(),!0;case"ignore":return!0}}convertToRefreshTimerEvent(e){return"gameLoadingStateResponse"===e.event?e.success?"gameLoadingStateResponseSuccess":"gameLoadingStateResponseFailure":e.event}}let x={regular:{minTimeBetweenConsecutiveRefreshes:3e4,maxTimeBetweenConsecutiveRefreshes:51e3,minTimeInDom:2e4},highlyAffectedSystems:{minTimeBetweenConsecutiveRefreshes:3e4,maxTimeBetweenConsecutiveRefreshes:15e4,minTimeInDom:2e4}},_=[{browsers:["safari"],os:[]}];function U(e){return e?e.toLowerCase().replace(/\s/g,""):"unknown"}var O=i(80394),V=i(64996),F=i(15734);let M=e=>{let{dispatch:t}=e,i=(0,a.useContext)(V.A).services.adUnitService,{countryCode:s}=(0,a.useContext)(F.A);return(0,a.useEffect)(()=>{void 0!==i&&i.getAdUnitsConfig(s).then(e=>t({type:"adsConfigLoaded",config:e}))},[t,i,s]),null};var P=i(80362);let j=e=>{let{dispatch:t}=e;return a.useEffect(()=>{let e=()=>t({type:"consentGiven"}),i=(0,P.b)();return i.addConsentListener(e),()=>i.removeConsentListener(e)},[t]),null},H=e=>{let[t,i]=a.useState(!1),s=e.state.adsLibraryLoaded&&e.state.adsConfigLoaded,n=e.state.userInfo.countryCode,r=e.state.userInfo.device?.browser,{locale:d,dispatch:o,deviceType:h}=e;return a.useEffect(()=>{if(t||!s)return;let e=window.CrazygamesAds;if(i(!0),(0,l.isDefined)(e?.hasEnabledBidders)){let t=e.hasEnabledBidders;(async()=>{o({type:"enabledBannerBiddersLoaded",hasEnabledBannerBidders:await t("banner")})})().catch(()=>o({type:"enabledBannerBiddersLoaded",hasEnabledBannerBidders:!0}))}else o({type:"enabledBannerBiddersLoaded",hasEnabledBannerBidders:!0})},[d,n,h,r,s,o,t]),null},q=e=>{let{pageUrlHelper:t,dispatch:i,resetLibrary:s,adsLoaderContext:n}=e,[r]=(0,a.useState)(s),d=(0,a.useContext)(V.A).services,o=(0,a.useRef)(!1),h=n.adsLoader,u=n.initAds;return a.useEffect(()=>{let e=()=>{let e=window;if(r&&(0,l.isDefined)(e.CrazygamesAds)&&e.CrazygamesAds.reset(),!o.current){try{u(),d.crazyAnalyticsService.adsFinishedLoading(),d.analyticsService.checkAdblock()}catch{console.debug("Failed to initialize ads, likely due to an adblocker."),d.analyticsService.detectedAdblock()}o.current=!0}i({type:"adsLibraryLoaded"})};return h.loadCrazyAds(t),h.addLoadListener(e),()=>h.removeLoadListener(e)},[t,i,r,d,h,u]),null};var z=i(52400);class G{constructor(e){this.adsLibraryLoaded=!1,this.adsConfigLoaded=!1,this.enabledBannerBiddersLoaded=!1,this.consent=!1,this.config=null,this.hasEnabledBannerBidders=null,this.userInfo=(0,z.w)(),e(this.userInfo.countryCode)||this.onConsentGiven()}handleAction(e){switch(e.type){case"adsLibraryLoaded":return this.onAdsLibraryLoaded();case"adsConfigLoaded":return this.onAdsConfigLoaded(e);case"consentGiven":return this.onConsentGiven();case"enabledBannerBiddersLoaded":return this.onEnabledBannerBiddersLoaded(e)}}retrieveState(){return this.adsLibraryLoaded&&this.adsConfigLoaded&&this.enabledBannerBiddersLoaded&&this.consent&&null!==this.config&&null!==this.userInfo&&null!==this.hasEnabledBannerBidders?{ready:!0,adsLibraryLoaded:this.adsLibraryLoaded,enabledBannerBiddersLoaded:this.enabledBannerBiddersLoaded,adsConfigLoaded:this.adsConfigLoaded,userInfo:this.userInfo,config:this.config,consent:!0,hasEnabledBannerBidders:this.hasEnabledBannerBidders}:{ready:!1,adsLibraryLoaded:this.adsLibraryLoaded,enabledBannerBiddersLoaded:this.enabledBannerBiddersLoaded,adsConfigLoaded:this.adsConfigLoaded,userInfo:this.userInfo,config:this.config,consent:this.consent,hasEnabledBannerBidders:this.hasEnabledBannerBidders}}onAdsLibraryLoaded(){return this.adsLibraryLoaded=!0,this.retrieveState()}onAdsConfigLoaded(e){return this.adsConfigLoaded=!0,this.config=e.config,this.retrieveState()}onConsentGiven(){return this.consent=!0,this.retrieveState()}onEnabledBannerBiddersLoaded(e){return this.enabledBannerBiddersLoaded=!0,this.hasEnabledBannerBidders=e.hasEnabledBannerBidders,this.retrieveState()}}class W{constructor(e){this.bidderAttemptsWithoutBid={},this.biddersToDisable={},this.onRequestAdsResult=(e,t,i)=>{if(i)for(let s of e.codes??[]){let n=this.extractEnabledBiddersForAdUnitFromRequest(s,e,t);this.updateBidderAttemptsWithoutBid(s,i,n),delete this.biddersToDisable[s]}},this.getBiddersToDisable=e=>{let t=this.bidderAttemptsWithoutBid[e];if(!this.biddersToDisable[e]){if(t){let i=Object.keys(t).filter(e=>{let i=t[e];return void 0!==i&&i>=this.numberOfBidAttempts});this.biddersToDisable[e]=i}else this.biddersToDisable[e]=[]}return this.biddersToDisable[e]},this.reset=()=>{this.bidderAttemptsWithoutBid={},this.biddersToDisable={}},this.getCurrentNumberOfAttemptsWithoutBid=(e,t)=>{let i=this.bidderAttemptsWithoutBid[e];if(void 0===i)return 0;let s=i[t];return void 0===s?0:s},this.numberOfBidAttempts=e}extractEnabledBiddersForAdUnitFromRequest(e,t,i){let s={};return(i.bidders||[]).forEach(e=>{s[e.bidder]={...e}}),(t.units.find(t=>t.adUnit.code===e)?.bidders||[]).forEach(e=>{s[e.bidder]={...s[e.bidder],...e}}),Object.values(s).filter(e=>e.enabled&&"google"!==e.bidder).map(e=>e.bidder)}updateBidderAttemptsWithoutBid(e,t,i){let s=this.bidderAttemptsWithoutBid[e]||{},n=t[e],r=(n?.bids??[]).map(e=>e.bidder);i.forEach(e=>{r.includes(e)?s[e]=0:s[e]=(s[e]||0)+1}),this.bidderAttemptsWithoutBid[e]=s}}function K(){throw Error("[AdContext] No Advertising Context")}let N=a.createContext({addAdUnit:e=>K(),removeAdUnit:(e,t)=>K(),adblock:!1});var $=function(e){return e.ANDROID="android",e.IOS="ios",e.WINDOWS="windows",e.MAC="macos",e.LINUX="linux",e.CHROMIUM="chromiumos",e.UBUNTU="ubuntu",e.UNKNOWN="unknown",e.OTHER="other",e}($||{});let X=null;class Y extends a.Component{static #e=this.isFirstRequest=!0;constructor(e){super(e),this.refreshTimer=void 0,this.deviceInfo=null,this.email=null,this.userId=null,this.disabledBidderTracker=new W(5),this.resetBiddersToDisableInterval=0,this.dispatchLoadingAction=e=>{if(!this.mounted)return;let t=this.advertisingLoadingModel.handleAction(e);this.setState({loadingModelState:t})},this.addAdUnit=e=>{!this.adUnits.find(t=>t.id===e.id)&&(this.adUnits.push(e),this.observer&&this.adConfig&&this.addUnitToObserver(e))},this.removeAdUnit=(e,t)=>{this.adUnits=this.adUnits.filter(t=>t.id!==e.id),this.observer&&this.adConfig&&this.removeUnitFromObserver(e,t)},this.requestAndRenderAds=()=>{if(!this.observer)return!1;let e=[],t=this.getRefreshTimer();this.firstPageRequest?e=this.adUnits.filter(e=>!this.observer.isUnitHidden(e.id)):(0,l.isDefined)(t)&&(e=this.adUnits.filter(e=>this.observer.canUnitRefresh(e.id,t.getMinimumTimeInDOMBeforeRefresh())));let i=e.map(e=>e.id),s=this.adUnitsRequestConfig();if(0===s.length||0===i.length)return!0;let n={units:s,codes:i},r=window.CrazygamesAds;if(void 0===r)return e.forEach(e=>e.onRender(!0)),!1;let a=this.requestAdsOptions();return r.requestOnly(n,a).then(async e=>{if(!this.mounted)return;let t=this.renderAds(i);e&&this.disabledBidderTracker.onRequestAdsResult(n,a,e),await t}).catch(e=>console.error(e)),this.firstPageRequest&&(this.firstPageRequest=!1,Y.isFirstRequest=!1,this.getRefreshTimer()?.handleExternalEvent({type:"initialAdsRequestFinished"})),!0},this.pageFocusChangeCallback=e=>{this.mounted&&this.getRefreshTimer()?.handleExternalEvent({type:"focusChanged",hasFocus:e})},this.shouldWaitUntilConsented=e=>(0,o.xS)(e)||(0,o.AL)(e),this.adUnits=[],this.timeInViewInMs=1e4,this.viewPortThreshold=.5,this.observer=null,this.advertisingLoadingModel=new G(e=>(0,f.A)(e,this.props.pageUrlHelper)&&this.shouldWaitUntilConsented(e)),this.state={loadingModelState:this.advertisingLoadingModel.retrieveState()},this.disabled=this.props.disabled||!(0,p.xl)(this.props.device)||this.props.pageUrlHelper.shouldDisableAds()}componentDidMount(){this.mounted=!0,this.observer=new R(this.viewPortThreshold,this.timeInViewInMs),this.firstPageRequest=!0,this.resetBiddersToDisableInterval=window.setInterval(()=>{this.resetBiddersToDisable()},9e5),this.props.services.crazyAnalyticsService.analyticsInfo().then(e=>{this.userId=e.userId})}componentWillUnmount(){this.mounted=!1,this.getRefreshTimer()?.handleExternalEvent({type:"willUnmount"}),this.observer&&(this.observer.stop(),this.observer=null);let e=window;e.CrazygamesAds&&e.CrazygamesAds.nextPage&&e.CrazygamesAds.nextPage(),window.clearInterval(this.resetBiddersToDisableInterval)}componentDidUpdate(e,t,i){let s=this.state.loadingModelState;if(s.ready&&(null===this.adConfig||void 0===this.adConfig)){if(this.adConfig=s.config,this.deviceInfo=s.userInfo.device||null,!s.hasEnabledBannerBidders)return;this.initRefreshTimer(),this.addUnitsToObserver(),this.toRequestAds()}}render(){return(0,r.jsxs)(r.Fragment,{children:[!this.disabled&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(q,{dispatch:this.dispatchLoadingAction,pageUrlHelper:this.props.pageUrlHelper,resetLibrary:!Y.isFirstRequest,adsLoaderContext:this.props.adsLoaderContext}),(0,r.jsx)(M,{dispatch:this.dispatchLoadingAction}),(0,r.jsx)(j,{dispatch:this.dispatchLoadingAction}),(0,r.jsx)(H,{dispatch:this.dispatchLoadingAction,state:this.state.loadingModelState,locale:(0,y.qz)(this.props.locale),deviceType:this.props.device.deviceType})]}),(0,r.jsx)(N.Provider,{value:{addAdUnit:this.addAdUnit,removeAdUnit:this.removeAdUnit,adblock:!1},children:this.props.children})]})}async toRequestAds(){await this.requestAds(),this.mounted&&this.addObserverCallbacks()}async requestAds(){if(0!==this.adUnitsRequestConfig().length&&(await this.observer.waitForObservedUnitsCallbacks(),this.mounted))return this.requestAndRenderAds()}requestAdsOptions(){let{dollarRate:e,...t}=this.adConfig.advertising,i=this.getTimeout(),s=this.adConfig.bidders.map(e=>this.mapApiConfigToBidderConfig(e)),n=this.getUserDetails(),r=window.location.origin+window.location.pathname,a=(0,d.J)(r,{name:this.props.advertisingGame.gameName,tagSlugs:this.props.advertisingGame.tagsSlug,upvotes:this.props.advertisingGame.numLikes},(0,h.lR)((0,y.qz)(this.props.locale)));return{...t,bidders:s,timeout:i,user:n,pageUrl:r,ortb2Site:a}}async renderAds(e){try{let t=this.renderAdsOptions(e),i=window.CrazygamesAds;(0,l.isDefined)(i)&&await i.render(e,t)}catch(e){console.error(e)}}renderAdsOptions(e){let t=this.adConfig.bidders.find(e=>"google"===e.id),i=t?{googleBidder:{...this.mapApiConfigToBidderConfig(t),enabled:!0}}:{},s={};return e.forEach(e=>{(0,L.z)(e)?s[e]={clearSlotIfEmpty:!0}:s[e]={clearSlotIfEmpty:!1}}),{gam:this.gamKeys(),banner:{callback:e=>{let{minPrice:t,code:i,empty:s,type:n,houseAd:r}=e;if("UnitRendered"===n){var a,d;let e=this.props.services;a={analyticsService:e.analyticsService,crazyAnalyticsService:e.crazyAnalyticsService},d={value:r||s?0:t,gameSlug:this.props.advertisingGame.gameSlug},null===u&&(u={timeoutId:window.setTimeout(()=>{for(let e in a.crazyAnalyticsService.bannerAdConversion(u?.totalValue||0),u?.valueByGame)a.analyticsService.trackAdConversion({gameSlug:e,value:u?.valueByGame[e]??0});"undefined"!=typeof gtag&&u&&u.totalValue&>ag("event","conversion",{send_to:"AW-312835820/UBOSCNjR06wDEOz9lZUB",value:u.totalValue,currency:"EUR"}),u=null},1e3),totalValue:0,valueByGame:{}}),u.totalValue=u.totalValue+d.value,u.valueByGame[d.gameSlug]=(u.valueByGame[d.gameSlug]||0)+d.value;let n=this.adUnits.find(e=>e.id===i);void 0!==n&&n.onRender(s)}},unitOptions:s},...i}}getTimeout(){return Y.isFirstRequest?2400:2e3}mapApiConfigToBidderConfig(e){let t={bidder:e.id,...e.config};return"adsense"===e.id?{...t,enabled:!1}:{enabled:!0,...t}}adUnitsRequestConfig(){return this.adUnits.map(e=>{let t=this.getUnitDefinition(e.id);if(!t)return console.error(`[Advertising] Unexpected id ${e.id}`),null;let i=this.disabledBidderTracker.getBiddersToDisable(e.id),s=t.config.request.bidders.map(e=>i.includes(e.bidder)||"adsense"===e.bidder?{...e,enabled:!1}:e);return{adType:"portalBanner",adUnit:{mediaTypes:t.definition.mediaTypes,code:e.id},slotId:t.definition.slotId,...t.config.request,bidders:s}}).filter(l.isDefined)}addUnitsToObserver(){this.adUnits.forEach(e=>{this.addUnitToObserver(e)})}addObserverCallbacks(){this.observer.addPageFocusChangeCallback(this.pageFocusChangeCallback)}addUnitToObserver(e){if(!this.getUnitDefinition(e.id)){console.error("Missing definition",e.id);return}this.observer.addElement(e.id)}removeUnitFromObserver(e,t){let i=this.getUnitDefinition(e.id);if(!i){console.error("Missing definition",e.id);return}i.definition.refresh&&this.observer.removeElement(e.id,t)}gamKeys(){let e;let{pageUrlHelper:t,advertisingGame:i}=this.props,{gameSlug:s,tagsSlug:n,categoryEnSlug:r}=i,a=t.routeData.hostname,d=(0,A.$x)();if(d){let t=new Date(d.date),i=t.getUTCDate().toString().padStart(2,"0"),s=(t.getUTCMonth()+1).toString().padStart(2,"0"),n=t.getUTCFullYear().toString().slice(-2);e=`${d.adGroup}_${i}_${s}_${n}`}let o=this.mapOsToGamOs(this.deviceInfo?.os.name),h=this.isLoggedIn();return{domain:a,pwa:`${(0,E.M)()}`,category_slug:r,game_slug:s,tags_slug:n.length>0?n:void 0,adgroup_acqdate:e,logged_in:`${h}`,os:o,locale:this.props.locale,...function(){let e=window.innerWidth,t=window.innerHeight;if(w.some(i=>i.width===e&&i.height===t))return{browser_size:`${e}x${t}`}}()}}isLoggedIn(){return!!this.props.userContext.user}mapOsToGamOs(e){switch(this.getCleanedString(e)){case"unknown":return"unknown";case"android":return"android";case"ios":return"ios";case"windows":return"windows";case"macos":return"macos";case"linux":return"linux";case"chromiumos":return"chromiumos";case"ubuntu":return"ubuntu";default:return"other"}}getUnitDefinition(e){return this.adConfig.units.find(t=>t.id===e)}getRefreshTimer(){return(0,l.isDefined)(this.refreshTimer)||this.initRefreshTimer(),this.refreshTimer}initRefreshTimer(){var e,t;if(!this.state.loadingModelState.ready||(0,l.isDefined)(this.refreshTimer))return;let{smartRefresh:i}=this.props,s=this.requestAndRenderAds;this.refreshTimer=(e=this.deviceInfo?.os.name,t=this.deviceInfo?.browser.name,new k(s,function(e){let t=.05>Math.random();return(0,p.Kg)(e)&&!t?{type:"waitUntilAfterGameLoading",minimumWaitTimeAfterPageLoad:45e3}:{type:"startOnMount"}}(this.props.device),function(e,t,i){let s=!function(e,t){let i=U(e),s=U(t);for(let e of _){let t=0===e.browsers.length||e.browsers.includes(s),n=0===e.os.length||e.os.includes(i);if(t&&n)return!0}return!1}(e,t)?x.regular:x.highlyAffectedSystems,n=i?.minWaitInMs!==void 0?i.minWaitInMs:s.minTimeBetweenConsecutiveRefreshes,r=i?.maxWaitInMs!==void 0?i.maxWaitInMs:s.maxTimeBetweenConsecutiveRefreshes;return{type:"smart",minimumTimeBetweenRefreshes:Math.min(n,r),maximumTimeBetweenRefreshes:Math.max(n,r),minimumTimeInDOM:s.minTimeInDom}}(e,t,i))),this.refreshTimer.handleExternalEvent({type:"mounted"}),this.firstPageRequest||this.refreshTimer.handleExternalEvent({type:"initialAdsRequestFinished"})}getUserEmail(){if((0,l.isDefined)(this.email))return this.email;let{userContext:e}=this.props,{user:t,loadingUser:i}=e;if(i)return null;let s=t?.email?.trim().toLowerCase().replace(/\+[^@]*@/g,"@");return this.email=s??null,this.email}getUserDetails(){var e;return{email:this.getUserEmail(),amazon:{applicable:(e=this.deviceInfo,null===X&&(X=!!e&&["Firefox","Safari","Mobile Safari"].some(t=>(0,p.Bd)(e?.browser,t))),X)},id:this.userId}}resetBiddersToDisable(){this.disabledBidderTracker.reset()}getCleanedString(e){return e?e.toLowerCase().replace(/\s/g,""):"unknown"}}let Z=(0,v.A)((0,g.A)((n=(0,b.A)((s=e=>{let t=a.useContext(O.B);return(0,r.jsx)(Y,{adsLoaderContext:t,...e})},e=>{let t=a.useContext(c.R);return(0,r.jsx)(s,{userContext:t,...e})})),e=>{let{pageUrlHelper:t}=a.useContext(m.e);return(0,r.jsx)(n,{pageUrlHelper:t,...e})})))},65363:(e,t,i)=>{i.d(t,{z:()=>n});var s=i(88500);function n(e){switch(e){case s.Rj.RightMpuRefresh:case s.Rj.LeaderboardBelowGameRefresh:case s.Rj.SecondLeaderboardBelowGameRefresh:return!0;case s.Rj.SecondMpuBelowGameRefresh:return!1;default:throw Error(`Unknown ad unit id: ${e}`)}}},94282:(e,t,i)=>{i.d(t,{A:()=>m});var s=i(74848);i(96540);var n=i(77889),r=i(13368),a=i.n(r),d=i(45300),o=i(49754),h=i(35265),l=i(57298);let u="favicons/apple-touch-icon-3.png",c="favicons/touch-icon.png",m=e=>{let{title:t,metaDescription:i,canonical:r,alternatives:m=[],children:g}=e,f=m.find(e=>{let{locale:t}=e;return t===h.Xn}),p=(e,t,i)=>(0,o.Ay)(e,{width:t,height:i,fit:"crop",format:"png"}),b="development"===d.A.Instance.environment;return(0,s.jsxs)(a(),{children:[(0,s.jsx)("title",{children:`${b?"\uD83E\uDD99 - ":""}${t}`}),(0,s.jsx)("link",{rel:"manifest",href:"/manifest"}),(0,s.jsx)("meta",{httpEquiv:"Accept-CH",content:"DPR"}),(0,s.jsx)("meta",{name:"description",content:i}),r&&(0,s.jsx)("link",{rel:"canonical",href:r}),m.map(e=>{let{href:t,locale:i}=e,r=(0,n.lR)((0,h.qz)(i));return(0,s.jsx)("link",{rel:"alternate",hrefLang:r,href:t},r)}),f&&(0,s.jsx)("link",{rel:"alternate",href:f.href,hrefLang:"x-default"}),(0,s.jsx)("meta",{name:"theme-color",content:l.l.black[70]}),(0,s.jsx)("meta",{name:"HandheldFriendly",content:"true"}),(0,s.jsx)("meta",{name:"mobile-web-app-capable",content:"yes"}),(0,s.jsx)("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),(0,s.jsx)("meta",{name:"apple-mobile-web-app-status-bar-style",content:"default"}),(0,s.jsx)("meta",{property:"al:android:package",content:"com.crazygames.crazygamesapp"}),(0,s.jsx)("link",{rel:"apple-touch-icon",href:p(u,120,120)}),(0,s.jsx)("link",{rel:"apple-touch-icon",sizes:"152x152",href:p(u,152,152)}),(0,s.jsx)("link",{rel:"apple-touch-icon",sizes:"167x167",href:p(u,167,167)}),(0,s.jsx)("link",{rel:"apple-touch-icon",sizes:"180x180",href:p(u,180,180)}),(0,s.jsx)("link",{rel:"mask-icon",href:(0,o.Ay)("favicons/safari-pinned-tab.svg",{},!1),color:"#6842ff"}),(0,s.jsx)("link",{rel:"icon",href:p(c,16,16),sizes:"16x16"}),(0,s.jsx)("link",{rel:"icon",href:p(c,32,32),sizes:"32x32"}),(0,s.jsx)("link",{rel:"icon",href:p(c,48,48),sizes:"48x48"}),(0,s.jsx)("link",{rel:"icon",href:p(c,196,196),sizes:"196x196"}),(0,s.jsx)("meta",{name:"msapplication-TileColor",content:"#603cba"}),(0,s.jsx)("meta",{name:"msapplication-TileImage",content:p(c,144,144)}),g]})}},75493:(e,t,i)=>{i.d(t,{A:()=>a});var s=i(74848),n=i(96540),r=i(8056);let a=function(e){return t=>{let i=n.useContext(r.A);return(0,s.jsx)(e,{device:i,...t})}}},46489:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EXCLUDED_TAGS=t.AMAZON_CREATIVES=t.PREBID_VIDEO_CREATIVES=t.PREBID_VIDEO_CREATIVES_MAP=t.AVAILABLE_VIDEO_TYPES=t.AVAILABLE_AD_FORMATS=t.AVAILABLE_DEVICES=t.AVAILABLE_BIDDER_CODES=t.AVAILABLE_PREBID_SERVER_BIDDER_CODES=t.PREBID_SERVER_BIDDER_CODE_SUFFIX=t.AVAILABLE_PREBID_BIDDER_CODES=t.AVAILABLE_NON_PREBID_BIDDER_CODES=void 0,t.AVAILABLE_NON_PREBID_BIDDER_CODES=["google","amazon","adsense"],t.AVAILABLE_PREBID_BIDDER_CODES=["ix","rubicon","sharethrough","pubmatic","appnexus","venatus","goldbach","seedtag","ozone","ttd","nexx360","openx","triplelift","medianet"],t.PREBID_SERVER_BIDDER_CODE_SUFFIX="_server",t.AVAILABLE_PREBID_SERVER_BIDDER_CODES=[],t.AVAILABLE_BIDDER_CODES=[...t.AVAILABLE_NON_PREBID_BIDDER_CODES,...t.AVAILABLE_PREBID_BIDDER_CODES,...t.AVAILABLE_PREBID_SERVER_BIDDER_CODES],t.AVAILABLE_DEVICES=["desktop","mobile","tablet"],t.AVAILABLE_AD_FORMATS=["banner","video"],t.AVAILABLE_VIDEO_TYPES=["preroll","midroll","rewarded"],t.PREBID_VIDEO_CREATIVES_MAP={appnexus:"138242044687",ix:"138241895930",pubmatic:"138241896683",rubicon:"138241885337",sharethrough:"138382194304",venatus:"138367023875",goldbach:"138479636654",seedtag:"138480188935",ozone:"138520313072",ttd:"138516025707",nexx360:"138520677054",triplelift:"138342033878",openx:"138241895621",medianet:"138526849982"},t.PREBID_VIDEO_CREATIVES=Object.values(t.PREBID_VIDEO_CREATIVES_MAP).filter(e=>null!==e),t.AMAZON_CREATIVES=["138340379973","138340379976","138340320638","138340379970","138340320629","138340320635","138340379967","138340379961","138340379964","138340320632"],t.EXCLUDED_TAGS=["army","battle-royale","battleship","bloody","bomberman","cannon","first-person-shooter","gta","gun","horde-survival","hunting","jump-scare","killing","mmo","police","scary","shooting","sniper","soldier","surgery","survive","tank","third-person-shooter","war"]},70302:(e,t,i)=>{t.J=function(e,t,i){let r=(t.tagSlugs||[]).filter(e=>-1===s.EXCLUDED_TAGS.indexOf(e));return{page:e,content:{title:t.name,url:window.location.href,context:2,userrating:`${t.upvotes}`,sourcerelationship:1,keywords:r.join(","),language:i},name:"CrazyGames",keywords:n.join(",")}};let s=i(46489),n=["online games","free games","browser games","html5 games","web games","casual games","action games","multiplayer games","puzzle games","mobile-friendly games","instant play"]},88500:(e,t)=>{var i;t.Rj=void 0,function(e){e.LeaderboardBelowGameRefresh="div-gpt-ad-1590672385835-0",e.RightMpuRefresh="div-gpt-ad-1590672182999-0",e.SecondLeaderboardBelowGameRefresh="div-gpt-ad-1724075559578-0",e.SecondMpuBelowGameRefresh="div-gpt-ad-1731941770755-0"}(i||(t.Rj=i={})),Object.values(i)}}]);
