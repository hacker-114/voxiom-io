try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="94edcd9b-2f19-47e3-957f-4e7446ee1cb7",e._sentryDebugIdIdentifier="sentry-dbid-94edcd9b-2f19-47e3-957f-4e7446ee1cb7")}catch(e){}{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=Object.assign({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:crazygames-portal":!0})}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[69545],{69545:(e,t,r)=>{"use strict";r.d(t,{A:()=>$,S:()=>W});var a=r(74848),o=r(96540),n=r(88599),s=r(70111),i=r(16546),l=r(341),c=r(12896),d=r(79004),u=r(49704),g=r(63522),p=r(59386),f=r(53637),y=r(8056),m=r(40499),_=r(16448),w=r(94438),b=r(8379),v=r(45249),B=r(53436),P=r(38131),h=r(59785),k=r(98825),z=r(9020),C=r(67023),I=r(64996),S=r(90321),A=r(46961);let x=S.X1;A.kk,A.JO,A.Ui;var E=r(97307),D=r(24747),R=r(66961);let G=e=>{let{gfSource:t}=e,{services:r}=o.useContext(I.A),a=r.crazyAnalyticsService,{pageUrlHelper:n}=o.useContext(R.e);return o.useEffect(()=>{(async()=>{let e=await a.analyticsInfo();n.isOnPreviewPage()&&(e.enabled=!1),t.window?.postMessage({type:"analyticsInfoGF",data:{analyticsInfo:e}},"*")})()},[a,t,n]),null};var T=r(36490),M=r(45300);let F={rewarded:null,interstitial:null};function N(e){switch(e){case"rewarded":return"rewarded";case"midroll":case"preroll":return"interstitial"}}function O(e,t,r){let a=M.A.Instance.data.advertizing.adMob.adUnitId[e][t];return r?a[r]??a.default:a.default}async function U(e,t){let r=N(e),a=O(i.Ii.getPlatform(),r,t);await L(a,r)}async function q(e,t){let r=N(e),a=O(i.Ii.getPlatform(),r,t);await j(a,r)}async function j(e,t){let r=F[t];if(r&&r.adUnitId===e&&!(Date.now()-r.preparedAt>354e4))return;let a="development"===M.A.Instance.environment;switch(t){case"rewarded":await T.IW.prepareRewardVideoAd({adId:e,isTesting:a});break;case"interstitial":await T.IW.prepareInterstitial({adId:e,isTesting:a});break;default:throw Error(`Unhandled AdMobVideoType: ${t}`)}F[t]={adUnitId:e,preparedAt:Date.now()}}async function L(e,t){try{switch(await j(e,t),F[t]=null,t){case"rewarded":await T.IW.showRewardVideoAd();break;case"interstitial":await T.IW.showInterstitial();break;default:throw Error(`Unhandled AdMobVideoType: ${t}`)}}catch(e){console.error(e)}}var V=r(35531);let J=e=>{let{game:t,gfSource:r}=e,{user:a,loadingUser:n}=o.useContext(p.R),{user:s,refetch:i}=g.Jd(),l=(0,V.S)(),[c,d]=o.useState(!1),u=o.useRef(!1),{openedDrawer:f}=o.useContext(h.l9),{favouriteGames:y}=g.oS(),m=y.some(e=>e.slug===t.slug);return o.useEffect(()=>{f&&["signIn","signUpEmail"].includes(f.drawer)&&d(!0)},[f]),o.useEffect(()=>{c&&a&&!u.current&&(u.current=!0,async function(){let e=await i();if(!e.data){u.current=!1;return}let t=e.data.me,o={username:`${t.username}`,profilePictureUrl:`${M.A.Instance.data.images}${t.profile.avatar}`};r.window?.postMessage({type:"userLoggedIn",data:{userId:a.uid,userData:o,email:a?.email||void 0}},"*")}())},[a,r,i,c]),o.useEffect(()=>{if(n)return;let e=s?{username:`${s.username}`,profilePictureUrl:`${M.A.Instance.data.images}${s.profile.avatar}`}:void 0,t={type:"userPortalInfoSync",data:{userId:a?.uid,userData:e,isFavouriteGame:m,email:a?.email||void 0,profileCompleteStatus:{isComplete:100===l,hasGender:s?.profile.gender!==null}}};r.window?.postMessage(t,"*")},[m,n,a,s,r,l]),null},W=null,$=e=>{let{game:t}=e,{user:r,loadingUser:S}=o.useContext(p.R),A=o.useContext(k.d),R=o.useContext(y.A),{openDrawer:T}=o.useContext(h.lv),{favouriteGames:M}=g.oS(),F=g.fr(),N=g.T0(),{services:O}=o.useContext(I.A),{routeHelper:j}=o.useContext(v.A),{setProgressIconStatus:L,resetGameInvites:V,setGameInviteLink:$,gameInviteLink:Q,mountedTime:X}=o.useContext(z.Tz),{crazyRouterChange:H}=o.useContext(C.G),Y=(0,s.m)(),{user:Z}=g.Jd(),K=M.some(e=>e.slug===t.slug),[ee,et]=o.useState(null),er=O.experimentService,ea=u.QB(),eo=(0,_.t)(),[en]=g.BX(),es=(0,c.isDefined)(r),{vote:ei,loading:el}=(0,w.Z)(t),ec=(0,B.hO)(t.slug);return(o.useEffect(()=>{let e=async e=>{let{requestType:t,rawGraphqlString:r,variables:a,fetchPolicy:o,errorPolicy:s="all",callbackId:i}=e.data;try{let l=(0,d.qg)(r);if("query"===t){let t=await Y.query({query:l,variables:a,fetchPolicy:o,errorPolicy:s}),r={resultData:t.data,errors:t.error?[t.error]:void 0,networkStatus:t.error?n.pT.error:n.pT.ready,callbackId:i};e.source?.postMessage({type:"forwardToUpGraphqlResponse",data:r},"*")}else if("mutation"===t){let t=await Y.mutate({mutation:l,fetchPolicy:"no-cache",variables:a,errorPolicy:s,context:{queryDeduplication:!1}}),r={resultData:t.data,errors:t.errors,callbackId:i};e.source?.postMessage({type:"forwardToUpGraphqlResponse",data:r},"*")}}catch(r){console.error("[UPGFConnector]",JSON.stringify(r));let t={resultData:null,errors:[r.message?r.message:JSON.stringify(r)],callbackId:i};e.source?.postMessage({type:"forwardToUpGraphqlResponse",data:t},"*")}},a=async(e,r,a)=>{if(!t.leaderboardOptions||!(0,c.isDefined)(Z)||!Z.privacy.enableLeaderboards){let e=[];t.leaderboardOptions||e.push("leaderboard options is not defined"),(0,c.isDefined)(Z)||e.push("user data is not defined"),(0,c.isDefined)(Z)&&!Z.privacy.enableLeaderboards&&e.push("leaderboards not enabled in user privacy settings"),console.log(`Score submission is not allowed: ${e.join(", ")}`);return}let o=Y.readQuery({query:E.B8,variables:{gameIds:[e]}}),n=o?.me?.currentSeasonScoresForGames?.find(t=>t.gameId===e)?.score,s=await Y.mutate({mutation:x,fetchPolicy:"no-cache",variables:{input:{gameId:e,encryptedScore:r,requestId:a}},errorPolicy:"all",context:{queryDeduplication:!1},refetchQueries:[{query:E.B8,variables:{gameIds:[e]}},{query:E.pz,variables:{gameId:e}}],awaitRefetchQueries:!0});if(s.data?.submitScore){let t=Y.readQuery({query:E.B8,variables:{gameIds:[e]}}),r=t?.me?.currentSeasonScoresForGames?.find(t=>t.gameId===e);if(r){let e=r.score;if(n&&n===e)return;let t=parseFloat(e);O.crazyAnalyticsService.leaderboardEvent("gamepage","scoreupdated",{score:{value:t,globalRank:r.overallRank,countryRank:r.countryRank,friendsRank:r.friendsRank}})}}},o=e=>{let t=!!JSON.parse(P.A.Instance.getItem(D.r_)||"false"),a={type:"gfInit",data:{userAccountAvailable:!0,userExpected:t,wasUserLoggedIn:!!JSON.parse(P.A.Instance.getItem(D.zW)||"false"),email:r?.email?.trim().toLowerCase().replace(/\+[^@]*@/g,"@")||void 0,vote:r?ei:ec,applicationType:(0,b.D)(),useNativeAds:i.Ii.isNativePlatform(),pageVisitId:O.crazyAnalyticsService.getPageVisitId()}};e.source?.postMessage(a,"*"),et({window:e.source}),W={window:e.source}},s=e=>{A.openFeedbackDrawer("game",{feedbackSource:e,gameFeedbackOptions:{game:t,mountedTime:X||void 0}})},u=async n=>{if(n.data&&n.data.type===l.x)switch(n.data.event){case"sessionStart":O.experimentService.registerGameframeExperiments(n.data.experiments);break;case"requestToFavouriteGame":r?F({id:t.id,slug:t.slug,name:t.slug,cover:t.cover,covers:t.covers,videos:t.videos,status:t.status,iosFriendly:!0,androidFriendly:!0,mobileFriendly:!0,gameThumbLabels:[]}):T("myGames-favourite");break;case"requestToUnFavouriteGame":r?N(t.id):T("myGames");break;case"forwardToUpGraphql":await e(n);break;case"requestGfInit":o(n);break;case"redirectToHomepage":{let e=j.homePageLink();H(e.href,e.as);break}case"refreshGamePage":window.location.reload();break;case"browserBack":window.history.back();break;case"openProgressStatusDrawer":L(n.data.progressIconStatus),T("progressStatus");break;case"feedback":let i=n.data.source;"dislike"===i?s("gfDislikeFeedback"):"feedbackButton"===i?s("gfFeedback"):(console.error("Missing feedback event source from GF"),s("unknown"));break;case"showInviteButton":if(!r)return;$(n.data.inviteUrl),O.crazyAnalyticsService.gameInteractionEvent({method:"join",origin:"game",action:"broadcast",target:null,targetStatus:null,targetGameId:t.id});break;case"hideInviteButton":if(!r||!Q)return;await ea({variables:{input:{joinUrl:Q,gameId:t.id}}}),V(),$(null),O.crazyAnalyticsService.gameInteractionEvent({method:"join",origin:"game",action:"expire",target:null,targetStatus:null,targetGameId:t.id});break;case"showFriendsDrawer":r?T("friends"):T("friendsGuest"),O.crazyAnalyticsService.sendModalEvent("noRewardAltCTA","open","invite_friends","noRewardAltInviteFriends");break;case"showEditProfileDrawer":T("editProfile"),O.crazyAnalyticsService.sendModalEvent("noRewardAltCTA","open","complete_profile","noRewardAltCompleteProfile");break;case"showLoginDrawer":T("signIn");let c=n.data;O.crazyAnalyticsService.sendModalEvent(c.source,"open","login",c.clickOrigin);break;case"showOnMobileDrawer":T("shareOnMobile"),O.crazyAnalyticsService.sendModalEvent("noRewardAltCTA","open","on_mobile","noRewardAltPlayOnMobile");break;case"afterPlayNow":eo();break;case"triggerPlayOnApp":(0,m.xl)(R)?T("openApp"):(0,f.ft)(es);break;case"nativeVideo":let d=n.data;d.play?await U(d.videoType,t.category?.enSlug):await q(d.videoType,t.category?.enSlug);break;case"completeProfile":let{gender:u}=n.data;await en(u);break;case"submitScore":let{encryptedScore:g,requestId:p}=n.data;await a(t.id,g,p);break;case"gtagEvent":let y=n.data;"event"===y.command&&O.analyticsService.trackGAEvent({eventAction:y.targetId,eventCategory:y.parameters?.event_category||"gameframe",eventLabel:y.parameters?.event_label,eventValue:y.parameters?.value,additionalFields:y.parameters});break;case"pointerLockChanged":n.data.isLocked?(document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden"):(document.documentElement.style.overflow="",document.body.style.overflow="")}};return window.addEventListener("message",u),function(){window.removeEventListener("message",u)}},[H,Y,O,r,F,N,T,t,K,Z,S,j,er,L,V,$,Q,ea,ec,ei,el,eo,A,X,en,R,es]),o.useEffect(()=>{ee&&r&&!el&&ee.window.postMessage({type:"gameRating-update",vote:ei},"*")},[ee,r,ei,el]),ee)?(0,a.jsxs)(a.Fragment,{children:[!1,(0,a.jsx)(J,{game:t,gfSource:ee}),(0,a.jsx)(G,{gfSource:ee})]}):null}},35531:(e,t,r)=>{"use strict";r.d(t,{A:()=>g,S:()=>u});var a=r(74848),o=r(96540),n=r(4743),s=r(63522),i=r(59785),l=r(57780),c=r(56257),d=r.n(c);let u=()=>{let{user:e}=s.Jd();if(!e)return 100;let t=[e?.profile?.avatar,e?.profile?.cover,e?.profile?.country,e?.profile?.gender,e?.profile?.birthday];return t.filter(e=>e).length/t.length*100},g=o.memo(e=>{let{progress:t}=e,{openDrawer:r}=o.useContext(i.lv),s=o.useCallback(()=>{r("editProfile")},[r]);return(0,a.jsxs)("div",{className:d().root,onClick:s,children:[(0,a.jsxs)("div",{className:d().row,children:[(0,a.jsx)(n.x6,{id:"common.upDrawer.profileProgress",values:{number:t}}),(0,a.jsxs)("a",{className:d().completeNow,children:[(0,a.jsx)(n.x6,{id:"common.upDrawer.completeNow"}),(0,a.jsx)(l.A,{className:d().chevronRight})]})]}),(0,a.jsx)("progress",{className:d().progress,value:t,max:100})]})})},94438:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var a=r(96540),o=r(18081),n=r(43151),s=r(59386),i=r(46961),l=r(53436);function c(e){let{user:t}=(0,a.useContext)(s.R),[r,c]=(0,a.useState)(n.i.CANCEL),[d,{data:u,error:g,loading:p,called:f}]=(0,o._)(i.cg);return(0,a.useEffect)(()=>{t&&e.id?d({variables:{gameId:e.id}}):c((0,l.hO)(e.slug))},[t,e.id,e.slug,d]),(0,a.useEffect)(()=>{f&&!p&&(g?(console.error("[useUserGameVote] Error fetching user game vote:",g),c((0,l.hO)(e.slug))):u&&c(u.getUserGameVote??n.i.CANCEL))},[u,g,p,f,e.slug]),{vote:r,loading:p}}},56257:e=>{e.exports={czyButton:"ProfileCompletionProgressBar_czyButton__P6EmX","czyButton--contained--purple":"ProfileCompletionProgressBar_czyButton--contained--purple__aOIW6","czyButton--contained--white":"ProfileCompletionProgressBar_czyButton--contained--white__Q9a6_","czyButton--contained--grey":"ProfileCompletionProgressBar_czyButton--contained--grey__cfPRG","czyButton--contained--alert":"ProfileCompletionProgressBar_czyButton--contained--alert__V7D7O","czyButton--contained--success":"ProfileCompletionProgressBar_czyButton--contained--success__DnXmJ","czyButton--contained--black":"ProfileCompletionProgressBar_czyButton--contained--black__RfpVd","czyButton--contained--green-gradient":"ProfileCompletionProgressBar_czyButton--contained--green-gradient__iszWI","czyButton--contained--animated-green-gradient":"ProfileCompletionProgressBar_czyButton--contained--animated-green-gradient__7i_Ef","scroll-gradient":"ProfileCompletionProgressBar_scroll-gradient__i8F0X","czyButton--outlined--purple":"ProfileCompletionProgressBar_czyButton--outlined--purple__CDV7i","czyButton--link--purple":"ProfileCompletionProgressBar_czyButton--link--purple__SypcH","czyButton--outlined--white":"ProfileCompletionProgressBar_czyButton--outlined--white___amd1","czyButton--link--white":"ProfileCompletionProgressBar_czyButton--link--white__L9VLd","czyButton--outlined--grey":"ProfileCompletionProgressBar_czyButton--outlined--grey__3S282","czyButton--link--grey":"ProfileCompletionProgressBar_czyButton--link--grey__eCMeh","czyButton--outlined--alert":"ProfileCompletionProgressBar_czyButton--outlined--alert__YcJJx","czyButton--link--alert":"ProfileCompletionProgressBar_czyButton--link--alert__AlfkX","czyButton--outlined--success":"ProfileCompletionProgressBar_czyButton--outlined--success__NqkGR","czyButton--link--success":"ProfileCompletionProgressBar_czyButton--link--success__dJKnk","czyButton--outlined":"ProfileCompletionProgressBar_czyButton--outlined__61x05","czyButton--disabled":"ProfileCompletionProgressBar_czyButton--disabled__OrEnh","czyButton--height50":"ProfileCompletionProgressBar_czyButton--height50__dYTCe","czyButton--height34":"ProfileCompletionProgressBar_czyButton--height34__6Qr0z","czyButton--fullWidth":"ProfileCompletionProgressBar_czyButton--fullWidth__U3ej3","czyButton--headerIcon":"ProfileCompletionProgressBar_czyButton--headerIcon__NU13g","czyButton--headerIcon--desktop":"ProfileCompletionProgressBar_czyButton--headerIcon--desktop__n_TzS","czyButton--headerIcon--mobile":"ProfileCompletionProgressBar_czyButton--headerIcon--mobile__H_FjB",root:"ProfileCompletionProgressBar_root__WFVnW",row:"ProfileCompletionProgressBar_row__cSiY2",completeNow:"ProfileCompletionProgressBar_completeNow__V8Hiu",chevronRight:"ProfileCompletionProgressBar_chevronRight__nZ_1R",progress:"ProfileCompletionProgressBar_progress__H_iJd"}}}]);
