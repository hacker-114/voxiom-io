try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="fd61d764-1a3c-4288-9d6f-6588eaca5d1a",e._sentryDebugIdIdentifier="sentry-dbid-fd61d764-1a3c-4288-9d6f-6588eaca5d1a")}catch(e){}{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=Object.assign({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:crazygames-portal":!0})}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[71121],{91716:(e,t,a)=>{a.r(t),a.d(t,{LOCAL_BOOT_URL:()=>S,default:()=>T});var n=a(96540),i=a(26186),r=a(25911),l=a(16546),s=a(83633),o=a(79417),c=a(36490),d=a(13660),u=a(27360),f=a(76490),w=a(53652),h=a(40241),p=a(70897),g=a(27102),m=a(17061),y=a(21763),b=a(3683),v=a(86715),L=a(52891),A=a(37164),I=a(45300),P=a(12896),k=a(47213),R=a(96230),_=a(35265),E=a(24348);let U=new Set(Object.values(E.Ec).map(e=>e.pathLocale));function C(e,t,a){try{let n=new URL(e);if(t===a)return n.pathname+n.search+n.hash;let i=E.Ec[t].pathLocale,r=n.pathname.split("/").filter(p.y0);if(r.length>0&&U.has(r[0])&&r.shift(),r.length>0&&(0,p.y0)(r[0])){let e=function(e,t,a){let n;let i=(0,k.getLocalRouteProviderData)(a);for(let t of R.c){let a=i[t];if(e===a?.new){n=t;break}}if(!(0,P.isDefined)(n))return;let r=(0,k.getLocalRouteProviderData)(t)[n];if("tag"!==n&&"category"!==n)return r?.new}(r[0],t,a);(0,P.isDefined)(e)?r[0]=e:r.splice(0,r.length)}(0,P.isDefined)(i)&&r.unshift(i);let l=r.join("/");return"/"+l+n.search+n.hash}catch(t){return console.error("Failed to parse the provided URL:",t),e}}var D=a(87703);let S="https://localhost/index.html";async function O(){let e=await u.y.getApplicationLocales(),t=e?.locales?.[0];if(!(0,p.y0)(t)){let e=await u.y.getSystemLocales();t=e?.locales?.[0]}let a=t?.split("-")[0].split("_")[0];return Object.keys(E.Ec).find(e=>e.split("-")[0]===a)??h.Xn}async function x(){return new Promise(async e=>{let t=await i.q.addListener("appStateChange",async a=>{a.isActive&&(await t.remove(),e())});(await i.q.getState()).isActive&&(await t.remove(),e())})}function T(e){let{children:t}=e,a=(0,n.useRef)(!1),u=(0,v.useRouter)(),{triggerLogin:h,setLoading:p}=(0,n.useContext)(L.c),P=(0,D.x)(),k=async()=>{if(!l.Ii.isNativePlatform())return;let e=await i.q.getInfo();m.Ts({dsn:function(){throw Error("No Sentry Dsn found for Render Type web")}(),release:`${e.id}@${e.version}`,dist:e.build}),d.n(),await d.P.enable({config:{}});let t=await O(),a=(0,_.I_)(window.location.hostname,window.location.pathname);if(a!==t){document.location=C(window.location.href,t,a);return}async function n(e){let t=new URL(e).searchParams.get("token")??"";if(""===t){p(!1);return}await A.firebaseAuth.authStateReady();let a=await (0,g.p)(A.firebaseAuth,t);await h(a),p(!1)}async function v(e){if(await A.firebaseAuth.authStateReady(),null===A.firebaseAuth.currentUser)try{if("android"===l.Ii.getPlatform()&&l.Ii.isPluginAvailable("Browser"))p(!0),await r.P.open({url:`${e}/app-login`});else if("ios"===l.Ii.getPlatform()&&l.Ii.isPluginAvailable("IosAuthSession")){p(!0),await x();let t=await b.C.start({authUrl:`${e}/app-login`,callbackScheme:"crazygames"});await n(t.callbackUrl)}}catch{p(!1)}}await i.q.addListener("appUrlOpen",async e=>{if(console.info("AppUrlOpen",e),e.url.includes("login?token=")){await n(e.url);return}let a=new URL(e.url).searchParams.get("adj_deep_link"),i=new URL((a?decodeURIComponent(a):e.url).replace("crazygames://","https://")),r=function(e,t){let a=(0,_.I_)(e.hostname,e.pathname);return C(e.href,t,a)}(i,t);"1"===new URL(r,window.location.origin).searchParams.get("logged_in")&&await v(i.origin),await u.push(r)}),await i.q.addListener("backButton",async e=>{let{canGoBack:t}=e;if(P?.isGameOpenRef?.current){await o.eA.hide();return}t?(await f.Z.unlock(),await o.eA.show(),await w.r.show(),await d.P.enable({config:{}}),u.back()):await i.q.exitApp()}),await i.q.addListener("appStateChange",async e=>{e.isActive&&P?.isGameOpenRef?.current&&await o.eA.hide()}),l.Ii.isPluginAvailable("LottieSplashScreen")?y.F.appLoaded():await s.S.hide(),await c.IW.initialize({testingDevices:["fb45b225a6db8eef60e5d8d8dfb968fa"],initializeForTesting:"development"===I.A.Instance.environment});let L=await c.IW.requestConsentInfo();L.isConsentFormAvailable&&L.status===c.Oj.REQUIRED&&await c.IW.showConsentForm()};return(0,n.useEffect)(()=>{m.NA("page",u.asPath)},[u.asPath]),(0,n.useEffect)(()=>{a.current||(a.current=!0,k())}),(0,n.useEffect)(()=>{if(!l.Ii.isNativePlatform())return;let e=e=>{},t=async e=>{let t=e.target.closest("a");t&&t.href&&new URL(t.href).hostname!==window.location.hostname&&l.Ii.isPluginAvailable("Browser")&&(e.preventDefault(),await r.P.open({url:t.href}))};return document.addEventListener("click",t),document.addEventListener("click",e,!0),()=>{document.removeEventListener("click",t),document.removeEventListener("click",e,!0)}},[]),t}},56620:(e,t,a)=>{a.d(t,{A:()=>f,G:()=>u});var n=a(74848),i=a(96540),r=a(45300),l=a(30568),s=a(58033),o=a(45249),c=a(55775),d=a(66961);let u="instantJoin",f=i.forwardRef((e,t)=>{let{routeHelper:a}=i.useContext(o.A),{pageUrlHelper:f}=i.useContext(d.e),{slug:w,isKids:h,className:p,isInstantJoin:g,children:m,...y}=e,b=i.useContext(l.o);if(h){let e={href:`${r.A.Instance.data.kids}/game/${w}`,rel:"external nofollow",target:"_blank"};return(0,n.jsx)("a",{...e,className:p,...y,ref:t,children:m})}let v=(0,s.A)(b),L=a.gamePageLink(w,{origin:v});g&&(L=function(e){let{as:t}=e,a=new URL(e.href);return a.searchParams.set(u,"true"),{as:t,href:a.toString()}}(L));let A=f.isGamePage()&&f.getGameParams().game;return(0,n.jsx)(c.A,{...L,className:p,...y,shallow:A===w,ref:t,prefetch:!0,children:m})})},16448:(e,t,a)=>{a.d(t,{t:()=>l});var n=a(96540);a(16546);var i=a(86715);a(91716);let r=e=>{let t=!window.navigator.onLine;return void 0===e?t:t&&(404===e||!e)},l=()=>{let e=(0,i.useRouter)();return(0,n.useCallback)(t=>!!r(t)&&!e.pathname.includes("/offline")&&((()=>{let t=e.asPath;e.push(`/offline?returnTo=${encodeURIComponent(t)}`)})(),!0),[e])}},70897:(e,t,a)=>{t.y0=function(e){return(0,n.isDefined)(e)&&""!==e.trim()};let n=a(12896)}}]);
